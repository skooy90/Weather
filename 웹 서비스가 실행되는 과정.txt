Render 서버에 등록을 하면 도커에서 프로세스가 작동이 되어 index.html이 인텍트하여 frontend/src/pages/Home.js를 내용을 불러와 서버 메인화면에 보이게 할 것입니다.

웹 서비스 실행 과정:

1. 파일 경로 수정
   - DocumentRoot를 /var/www/html/frontend/build로 변경
   - 빌드된 React 파일이 올바른 위치에 복사되도록 수정
   - 빌드된 파일들이 build 디렉토리에 생성되어 서빙됨

2. Apache 설정 통합
   - 000-default.conf와 httpd-vhosts.conf의 중복 설정 제거
   - httpd.conf의 DocumentRoot 설정과 일치하도록 수정
   - 모든 설정 파일에서 build 디렉토리를 사용하도록 통일
   - JavaScript 파일 처리를 위한 MIME 타입과 캐싱 설정 추가

3. React 앱 로딩 설정
   - index.html에 React 앱 스크립트 태그 추가
   - 정적 파일 경로를 %PUBLIC_URL%로 설정
   - JavaScript 파일이 올바른 MIME 타입으로 제공되도록 설정
   - 빌드된 JS 파일에 대한 캐싱 설정 추가

4. 모듈 활성화
   - rewrite 모듈 활성화 확인
   - headers 모듈 활성화로 보안 헤더 지원
   - mime 모듈 설정으로 JavaScript 파일 처리

5. 권한 설정
   - 파일 소유권을 www-data로 변경
   - 디렉토리 및 파일 권한을 755로 설정
   - build 디렉토리에 대한 접근 권한 설정

6. 빌드 프로세스
   - npm install로 의존성 설치
   - npm run build로 프로덕션 빌드 생성
   - 빌드된 파일을 build 디렉토리에 생성
   - JavaScript 파일 최적화 및 번들링

7. 서비스 실행
   - Apache 서버 시작
   - 포트 10000에서 웹 서비스 실행
   - 로그 모니터링 설정
   - 정적 파일 서빙 확인

8. 보안 설정
   - X-Content-Type-Options 헤더 설정
   - X-Frame-Options 헤더 설정
   - X-XSS-Protection 헤더 설정
   - JavaScript 파일 보안 설정

9. Render 자동화
   - GitHub 저장소에 변경사항 푸시
   - Render가 자동으로 변경 감지
   - 새로운 Docker 이미지 자동 빌드
   - 컨테이너 자동 재시작

작동 순서:
1. 사용자가 웹사이트 접속
2. Apache가 build 디렉토리에서 index.html 제공
3. index.html이 React 앱 스크립트 로드
4. React 앱이 초기화되고 컴포넌트 렌더링
5. React Router가 URL에 따라 컴포넌트 렌더링
6. API 요청은 백엔드 서버로 전달

주의사항:
- 소스 코드는 직접 노출되지 않음
- 항상 빌드된 최적화 파일만 제공
- 디렉토리 구조는 브라우저에서 숨김
- JavaScript 파일은 올바른 MIME 타입으로 제공
- 적절한 캐싱으로 성능 최적화
- React 앱 스크립트가 올바르게 로드되는지 확인